# Lazybacktest 策略平台任務追蹤（LB-DSL-COMPOSER-20250713A）

## 階段 5：策略 DSL 與 Composer
- [x] 定義 JSON DSL 結構並實作 `buildComposite` 解析器。
- [x] 建立 AND / OR / NOT 與停損數值的單元測試確保評估正確。
- [x] 更新 Backtest Runner / Worker 支援 DSL 複合策略傳遞與註冊。
- [x] 在開發者區域加入「策略 DSL Sandbox」手動檢驗流程並記錄交易摘要。

## 階段 6：DSL 參數面板與策略映射
- [ ] 將 DSL 節點轉換為可編輯表單，確保 UI 參數變更能更新 DSL 定義。
- [ ] 建立策略選單與 DSL 節點對應表，支援既有策略與複合策略共存。
- [ ] 擴充驗證邏輯，阻擋缺少必要節點或角色重複的 DSL 組合。

## 階段 7：Worker 執行排程與快取治理
- [ ] 建立複合策略的快取 key 規則，確保 DSL 變動會重新暖身資料。
- [ ] 讓 Worker 在批量與滾動測試時重用 DSL 定義並回傳診斷資訊。
- [ ] 實作 DSL 執行的錯誤回報格式，方便前端顯示並記錄到開發者卡片。

## 階段 8：策略組合報表與診斷
- [ ] 擴充交易摘要，呈現各 DSL 節點貢獻度、觸發頻率與停損統計。
- [ ] 建立複合策略的暖身／資料診斷卡，標示每個子策略的指標需求。
- [ ] 規劃回測結果的 DSL 定義快照，以利分享與版本比對。

## 階段 9：Sandbox 互動工具與教學
- [ ] 於開發者區域提供 DSL 範本庫與拖拉編輯介面，支援即時預覽。
- [ ] 新增「策略流程」視覺化圖表，顯示 AND/OR/NOT 節點連結。
- [ ] 撰寫使用教學與驗證清單，整合到開發者模式的提示卡。

## 階段 10：部署驗證與版本管控
- [ ] 建立 DSL 版本化與相容性檢查，確保舊方案可自動遷移。
- [ ] 設計最終 E2E 測試腳本（含 Proxy 實測），覆蓋常見 DSL 組合。
- [ ] 與 Netlify 部署流程整合，記錄版本代碼與回測驗證結果。
