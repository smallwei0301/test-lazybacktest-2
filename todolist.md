# Lazybacktest 策略平台待辦清單（啟動於階段5）

> 版本代碼：LB-STRATEGY-DSL-20260920A

## 階段5：策略 DSL 與 Composer
- [x] 定義 DSL JSON 結構（plugin 節點與 AND/OR/NOT 運算元）
- [x] 實作 `buildComposite` 解析器並串接策略插件 Registry
- [x] 針對複合策略撰寫單元測試（AND/OR/NOT、停損／停利傳遞）
- [ ] 開發者模式：新增範例 DSL 驗證按鈕（待 UI 任務排程）

## 階段6：策略組合快取與序列化（預排）
- [ ] 將 DSL 結構序列化至使用者儲存檔案與分享連結
- [ ] 建立快取鍵策略，確保不同 DSL 組合能正確區隔
- [ ] 規劃快取回填機制，避免舊版策略組合與新 DSL 混用

## 階段7：策略參數驗證與 UI 表單映射（預排）
- [ ] 針對 DSL plugin 節點提供參數表單映射與即時驗證
- [ ] 在主執行緒導入 paramsSchema 自動補值／警示
- [ ] UI 提供策略積木化拖拉體驗與版本告警

## 階段8：複合策略診斷輸出（預排）
- [ ] Worker 與主執行緒對齊複合策略診斷結構
- [ ] 在資料暖身測試卡顯示 DSL 節點／觸發狀態
- [ ] 增加停損／停利來源追蹤資訊

## 階段9：批量優化與 DSL 對齊（預排）
- [ ] 批量優化讀取 DSL 結構並拆解策略節點參數
- [ ] Walk-Forward 視窗執行時維持 DSL 一致性
- [ ] 建立 DSL 版本升級工具以保留舊回測記錄

## 階段10：策略 Sandbox 與安全沙箱（預排）
- [ ] 建立策略 Sandbox Worker 與資源限制機制
- [ ] 實作 DSL 執行計時與失敗復原流程
- [ ] 規劃手動回放工具以重現 DSL 策略訊號

