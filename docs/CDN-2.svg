<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 650" style="background-color: #f9f9f9; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
  <defs>
    <style>
      .lifeline { stroke: #888; stroke-width: 2; stroke-dasharray: 5,5; }
      .actor-box { fill: #eef; stroke: #336; stroke-width: 2; }
      .actor-text { font-size: 14px; font-weight: bold; text-anchor: middle; fill: #336; }
      .message-arrow { stroke: #333; stroke-width: 2; marker-end: url(#arrowhead); }
      .response-arrow { stroke: #555; stroke-width: 1.5; stroke-dasharray: 4,2; marker-end: url(#arrowhead); }
      .note-box { fill: #fffde7; stroke: #d4c82c; stroke-width: 1; }
      .note-text { font-size: 12px; fill: #555; }
      .time-marker { font-size: 14px; font-weight: bold; fill: #b71c1c; }
      .success-zone { fill: #f6ffed; stroke: #389e0d; stroke-width: 2; stroke-dasharray: 8,4; }
      .shield-bypass { fill: none; stroke: #ccc; stroke-width: 2; stroke-dasharray: 2,2; }
      .active-icon { font-size: 24px; }
      .vip-arrow { stroke: #d46b08; stroke-width: 3; marker-end: url(#arrowhead-vip); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <marker id="arrowhead-vip" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#d46b08" />
    </marker>
  </defs>

  <text x="400" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">æˆåŠŸå ´æ™¯ï¼šCachebust ç²¾æº–è§¸ç™¼æ›´æ–° (æ­£å¸¸æ™‚æ®µ CDN ä¾ç„¶æœ‰æ•ˆ)</text>

  <g transform="translate(0, 50)">
    <rect x="50" y="0" width="100" height="40" rx="5" class="actor-box" />
    <text x="100" y="25" class="actor-text">ğŸ‘¤ ç”¨æˆ¶(æ…¢è»Šé“)</text>
    <line x1="100" y1="40" x2="100" y2="550" class="lifeline" />

    <rect x="200" y="0" width="120" height="40" rx="5" class="actor-box" style="fill:#e6f7ff; stroke:#0050b3;" />
    <text x="260" y="25" class="actor-text" style="fill:#0050b3;">ğŸ›¡ï¸ CDN (Edge)</text>
    <line x1="260" y1="40" x2="260" y2="550" class="lifeline" />

    <rect x="370" y="0" width="120" height="40" rx="5" class="actor-box" style="fill:#f6ffed; stroke:#389e0d;" />
    <text x="430" y="25" class="actor-text" style="fill:#389e0d;">ğŸ¤– Proxy(å¿«è»Šé“)</text>
    <line x1="430" y1="40" x2="430" y2="550" class="lifeline" />

    <rect x="540" y="0" width="120" height="40" rx="5" class="actor-box" style="fill:#fff7e6; stroke:#d46b08;" />
    <text x="600" y="25" class="actor-text" style="fill:#d46b08;">ğŸ‘¨â€ğŸ³ stock-range</text>
    <line x1="600" y1="40" x2="600" y2="550" class="lifeline" />

    <rect x="690" y="0" width="80" height="40" rx="5" class="actor-box" style="fill:#eee; stroke:#666;" />
    <text x="730" y="25" class="actor-text" style="fill:#666;">ğŸ’¾ DB (Blob)</text>
    <line x1="730" y1="40" x2="730" y2="550" class="lifeline" />
  </g>

  <g transform="translate(0, 110)">
    <text x="30" y="0" class="time-marker" style="fill:#333;">ğŸ•’ 10:00 (æ­£å¸¸æ™‚æ®µ)</text>
    <rect x="255" y="10" width="10" height="60" fill="#b3e0ff" opacity="0.5"/>

    <line x1="100" y1="15" x2="255" y2="15" class="message-arrow" />
    <text x="177" y="12" font-size="12" text-anchor="middle">è«‹æ±‚ K ç·š (ç„¡ cB)</text>
    
    <path d="M 260 10 L 280 10 L 280 65 L 260 65 Z" style="fill:#b3e0ff; stroke:#0050b3; opacity: 0.7;" />
    <text x="235" y="40" font-size="14" text-anchor="middle" fill="#0050b3">ğŸ›¡ï¸ å‘½ä¸­å¿«å–!</text>
    
    <line x1="255" y1="60" x2="100" y2="60" class="response-arrow" />
    <text x="177" y="57" font-size="12" text-anchor="middle">CDN ç›´æ¥å›å‚³ (çœæµé‡)</text>
    
    <rect x="530" y="20" width="220" height="40" rx="3" class="note-box" style="fill:#f0f0f0; stroke:#ccc;"/>
    <text x="640" y="45" class="note-text" text-anchor="middle">âœ… å¾Œç«¯èˆ‡ DB ä¿æŒä¼‘çœ ï¼Œæœªè¢«å–šé†’</text>
  </g>

  <g transform="translate(0, 230)">
    <text x="30" y="0" class="time-marker" style="fill:#d32f2f;">ğŸ•’ 14:05 (é—œéµè§¸ç™¼æ™‚åˆ»)</text>
    <rect x="425" y="20" width="10" height="120" fill="#d9f7be" opacity="0.8"/>
    <rect x="595" y="65" width="10" height="70" fill="#ffe7ba" opacity="0.8"/>
    <rect x="725" y="85" width="10" height="40" fill="#eee" opacity="0.8"/>

    <line x1="100" y1="25" x2="425" y2="25" class="message-arrow" />
    <text x="262" y="22" font-size="12" text-anchor="middle">çœ‹ç›¤è«‹æ±‚ (è§¸ç™¼åˆ¤å®š)</text>

    <text x="480" y="50" font-size="12" fill="#389e0d">åˆ¤å®š: >14:00, ç™¼å‡º VIP è«‹æ±‚!</text>

    <line x1="435" y1="70" x2="595" y2="70" class="vip-arrow" />
    <text x="515" y="65" font-size="11" text-anchor="middle" font-weight="bold" fill="#d46b08">GET /stock-range?cB=VIP_1405</text>
    <text x="260" y="65" font-size="12" text-anchor="middle" fill="#ccc">CDN è¢«ç¹é ğŸ’¨</text>

    <rect x="520" y="40" width="230" height="100" rx="5" class="success-zone" />
    <text x="635" y="20" text-anchor="middle" font-size="14" font-weight="bold" fill="#389e0d">âœ… æ›´æ–°æˆåŠŸå€åŸŸ âœ…</text>
    
    <text x="600" y="90" text-anchor="middle" class="active-icon">âš™ï¸</text>
    <text x="600" y="110" text-anchor="middle" font-size="10" fill="#389e0d">Function å•Ÿå‹•!<br/>(å¼·åˆ¶æ›´æ–°æ¨¡å¼)</text>

    <line x1="605" y1="95" x2="725" y2="95" class="message-arrow" style="stroke:#d46b08"/>
    <text x="665" y="90" font-size="10" text-anchor="middle" fill="#d46b08">å¯«å…¥æ–°è³‡æ–™(Write)</text>
    
    <text x="730" y="115" text-anchor="middle" class="active-icon">ğŸ’¾</text>
    <text x="765" y="115" text-anchor="middle" font-size="10" fill="#389e0d">DB æ›´æ–°!</text>

    <line x1="595" y1="135" x2="265" y2="135" class="response-arrow" />
     <text x="430" y="132" font-size="10" text-anchor="middle">å›å‚³æ–°è³‡æ–™ (CDN æ›´æ–°å¿«å–)</text>
  </g>

  <g transform="translate(0, 440)">
    <text x="30" y="0" class="time-marker">ğŸ•’ 14:10 (ç”¨æˆ¶å—ç›Š)</text>
    <rect x="255" y="10" width="10" height="60" fill="#b3e0ff" opacity="0.5"/>
    <rect x="595" y="25" width="10" height="30" fill="#ffe7ba" opacity="0.5"/>
    <rect x="725" y="30" width="10" height="20" fill="#eee" opacity="0.5"/>

    <line x1="100" y1="15" x2="255" y2="15" class="message-arrow" />
    <text x="177" y="12" font-size="12" text-anchor="middle">ç”¨æˆ¶è«‹æ±‚ (ç„¡ cB)</text>

    <line x1="265" y1="30" x2="595" y2="30" class="message-arrow" />
    <text x="430" y="27" font-size="12" text-anchor="middle">TTLéæœŸ, æ­£å¸¸ç©¿é€</text>
    
    <line x1="605" y1="40" x2="725" y2="40" class="message-arrow" />
    <text x="665" y="37" font-size="12" text-anchor="middle">è®€å– DB (æ–°è³‡æ–™)</text>
    
    <line x1="725" y1="60" x2="100" y2="60" class="response-arrow" />
    <text x="415" y="57" font-size="12" text-anchor="middle" font-weight="bold" fill="#389e0d">æœ€çµ‚å›å‚³ï¼šå…¨æ–°çš„ K ç·šè³‡æ–™ (åŒ…å«ä»Šæ—¥)</text>

    <text x="100" y="85" font-size="20" text-anchor="middle">ğŸ˜</text>
  </g>
</svg>