<svg xmlns="http://www.w3.org/2000/svg" width="1024" height="780" viewBox="0 0 1024 780">
  <style>
    .actor { stroke: #555; fill: #f0f8ff; stroke-width: 2px; }
    .text { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; }
    .note-box { fill: #fffbe6; stroke: #d4c82c; stroke-width: 1px; }
    .note-text { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; fill: #555; }
    .signal { stroke: #333; stroke-width: 2px; marker-end: url(#arrowhead); }
    .signal-dashed { stroke: #555; stroke-width: 2px; stroke-dasharray: 6,4; marker-end: url(#arrowhead); }
    .group-box { fill: none; stroke: #888; stroke-width: 2px; stroke-dasharray: 8,4; }
    .group-label { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #333; }
    .highlight-box { fill: #ffe6e6; stroke: #d32f2f; stroke-width: 2px; }
    .critical-note { fill: #ffcccc; stroke: #d32f2f; stroke-width: 2px; font-weight: bold; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#333" />
    </marker>
  </defs>

  <line x1="100" y1="50" x2="100" y2="750" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="300" y1="50" x2="300" y2="750" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="500" y1="50" x2="500" y2="750" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="700" y1="50" x2="700" y2="750" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="900" y1="50" x2="900" y2="750" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>

  <rect x="20" y="10" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="100" y="35" text-anchor="middle" class="text">ğŸ–¥ï¸ å‰ç«¯ UI / ä¸»åŸ·è¡Œç·’</text>
  <rect x="220" y="10" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="300" y="35" text-anchor="middle" class="text">ğŸ§  L1: è¨˜æ†¶é«”å¿«å–</text>
  <rect x="420" y="10" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="500" y="35" text-anchor="middle" class="text">âš™ï¸ Worker åŸ·è¡Œç·’</text>
  <rect x="620" y="10" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="700" y="35" text-anchor="middle" class="text">ğŸ’¾ L2: IndexedDB</text>
  <rect x="820" y="10" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="900" y="35" text-anchor="middle" class="text">â˜ï¸ å¤–éƒ¨ API</text>

  <rect x="60" y="65" width="280" height="30" class="note-box"/>
  <text x="200" y="85" text-anchor="middle" class="note-text">æ­¥é©Ÿ 1: å‰ç«¯éœ€è¦è³‡æ–™</text>

  <line x1="100" y1="110" x2="300" y2="110" class="signal"/>
  <text x="200" y="105" text-anchor="middle" class="text">1. è«‹æ±‚ K ç·šè³‡æ–™ (ä¾‹å¦‚ 2330)</text>

  <rect x="40" y="130" width="940" height="600" class="group-box"/>
  <path d="M 40 130 L 180 130 L 180 155 L 40 155 Z" fill="#eee" stroke="#888" stroke-width="1"/>
  <text x="50" y="148" class="text" font-weight="bold">alt</text>
  <text x="110" y="148" class="text">[è¨˜æ†¶é«”å¿«å–å‘½ä¸­ (Hit)]</text>

  <line x1="300" y1="180" x2="100" y2="180" class="signal-dashed"/>
  <text x="200" y="175" text-anchor="middle" class="text">ç›´æ¥å›å‚³è³‡æ–™ (é€Ÿåº¦æœ€å¿«)</text>

  <line x1="40" y1="210" x2="980" y2="210" stroke="#888" stroke-width="2" stroke-dasharray="8,4"/>
  <text x="50" y="230" class="text" font-weight="bold">[else è¨˜æ†¶é«”å¿«å–æœªå‘½ä¸­ (Miss)]</text>

  <line x1="300" y1="240" x2="500" y2="240" class="signal"/>
  <text x="400" y="235" text-anchor="middle" class="text">2. è½‰é€è«‹æ±‚çµ¦ Worker</text>

  <rect x="460" y="255" width="280" height="30" class="note-box"/>
  <text x="600" y="275" text-anchor="middle" class="note-text">æ­¥é©Ÿ 2: Worker æª¢æŸ¥ IDB ç‹€æ…‹</text>

  <line x1="500" y1="300" x2="700" y2="300" class="signal"/>
  <text x="600" y="295" text-anchor="middle" class="text">3. è®€å– IDB ç¾æœ‰è³‡æ–™</text>
  <line x1="700" y1="330" x2="500" y2="330" class="signal-dashed"/>
  <text x="600" y="325" text-anchor="middle" class="text">å›å‚³è³‡æ–™</text>

  <line x1="500" y1="350" x2="540" y2="350" class="signal"/>
  <line x1="540" y1="350" x2="540" y2="370" class="signal"/>
  <line x1="540" y1="370" x2="500" y2="370" class="signal"/>
  <text x="550" y="365" class="text">4. åˆ¤æ–·éœ€è£œè³‡æ–™</text>

  <rect x="510" y="385" width="230" height="30" rx="5" ry="5" class="critical-note" fill="#ffe6e6"/>
  <text x="625" y="405" text-anchor="middle" class="text" fill="#d32f2f" font-weight="bold">âš ï¸ è§¸ç™¼æƒ…æ³ 2ï¼šè³‡æ–™åš´é‡æ»¯å¾Œ</text>

  <line x1="500" y1="430" x2="100" y2="430" class="signal-dashed"/>
  <text x="300" y="425" text-anchor="middle" class="text">5. å›å‚³ã€Œå»ºè­°å–®ã€: { shouldPatch: true, cacheTTL: 1å°æ™‚ }</text>

  <rect x="60" y="450" width="880" height="30" class="note-box"/>
  <text x="500" y="470" text-anchor="middle" class="note-text">æ­¥é©Ÿ 3: ä¸»åŸ·è¡Œç·’åŸ·è¡Œè£œè³‡æ–™ä¸¦è¨­å®š L1 å¿«å–</text>

  <line x1="100" y1="500" x2="900" y2="500" class="signal"/>
  <text x="500" y="495" text-anchor="middle" class="text">6. æ ¹æ“šå»ºè­°ï¼Œç™¼é€ API è«‹æ±‚è£œè³‡æ–™</text>
  <line x1="900" y1="530" x2="100" y2="530" class="signal-dashed"/>
  <text x="500" y="525" text-anchor="middle" class="text">å›å‚³æ–°è³‡æ–™</text>

  <line x1="100" y1="560" x2="500" y2="560" class="signal"/>
  <text x="300" y="555" text-anchor="middle" class="text">7. é€å› Worker åˆä½µå­˜å…¥ IDB</text>
  <line x1="500" y1="590" x2="700" y2="590" class="signal"/>
  <text x="600" y="585" text-anchor="middle" class="text">8. æ›´æ–° IDB (æ°¸ä¹…å„²å­˜)</text>
  <line x1="500" y1="620" x2="100" y2="620" class="signal-dashed"/>
  <text x="300" y="615" text-anchor="middle" class="text">9. å›å‚³æœ€çµ‚å®Œæ•´è³‡æ–™</text>

  <rect x="110" y="635" width="160" height="30" rx="5" ry="5" class="critical-note" fill="#fffbe6" stroke="#d4c82c"/>
  <text x="190" y="655" text-anchor="middle" class="text" fill="#d46b08" font-weight="bold">é—œéµé»åœ¨æ­¥é©Ÿ 10 â†“</text>

  <line x1="100" y1="680" x2="300" y2="680" class="signal" stroke="#d32f2f" stroke-width="3"/>
  <text x="200" y="675" text-anchor="middle" class="text" fill="#d32f2f" font-weight="bold">10. å°‡æœ€çµ‚è³‡æ–™å­˜å…¥è¨˜æ†¶é«”å¿«å– (TTL: 1å°æ™‚)</text>

  <line x1="100" y1="700" x2="140" y2="700" class="signal"/>
  <line x1="140" y1="700" x2="140" y2="720" class="signal"/>
  <line x1="140" y1="720" x2="100" y2="720" class="signal"/>
  <text x="150" y="715" class="text">11. æ›´æ–° UI</text>

  <rect x="20" y="740" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="100" y="765" text-anchor="middle" class="text">ğŸ–¥ï¸ å‰ç«¯ UI / ä¸»åŸ·è¡Œç·’</text>
  <rect x="220" y="740" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="300" y="765" text-anchor="middle" class="text">ğŸ§  L1: è¨˜æ†¶é«”å¿«å–</text>
  <rect x="420" y="740" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="500" y="765" text-anchor="middle" class="text">âš™ï¸ Worker åŸ·è¡Œç·’</text>
  <rect x="620" y="740" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="700" y="765" text-anchor="middle" class="text">ğŸ’¾ L2: IndexedDB</text>
  <rect x="820" y="740" width="160" height="40" rx="5" ry="5" class="actor"/>
  <text x="900" y="765" text-anchor="middle" class="text">â˜ï¸ å¤–éƒ¨ API</text>
</svg>