# ğŸ” ä»£ç¢¼æ›´æ–°è‡ªå‹•æª¢æ¸¬æŒ‡å—

## ğŸ“– ç›®éŒ„
1. [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
2. [è‡ªå‹•æª¢æ¸¬å·¥ä½œæµ](#è‡ªå‹•æª¢æ¸¬å·¥ä½œæµ)
3. [å„å±¤ç´šæª¢æ¸¬](#å„å±¤ç´šæª¢æ¸¬)
4. [å¸¸è¦‹å ´æ™¯æŒ‡å—](#å¸¸è¦‹å ´æ™¯æŒ‡å—)
5. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
6. [CI/CD é›†æˆ](#cicd-é›†æˆ)

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æœ€ç°¡å–®çš„æ–¹å¼ (æ¨è–¦æ–°æ‰‹ä½¿ç”¨)

```bash
# 1ï¸âƒ£ ä¿®æ”¹ä»£ç¢¼å¾Œï¼Œé‹è¡Œå®Œæ•´æª¢æ¸¬
npm test

# 2ï¸âƒ£ æŸ¥çœ‹æ¸¬è©¦è¦†è“‹å ±å‘Š
npm run test:coverage

# 3ï¸âƒ£ æŸ¥çœ‹è©³ç´°çµæœ
npm run test:verbose
```

**å°±é€™éº¼ç°¡å–®!** âœ…

---

## ğŸ”„ è‡ªå‹•æª¢æ¸¬å·¥ä½œæµ

### å®Œæ•´å·¥ä½œæµ (æ¨è–¦æµç¨‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥é©Ÿ 1: ä¿®æ”¹ä»£ç¢¼                                    â”‚
â”‚        åœ¨ js/layers/core, api, ui ç­‰ç›®éŒ„ä¿®æ”¹ä»£ç¢¼     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥é©Ÿ 2: é‹è¡Œè‡ªå‹•æª¢æ¸¬                                â”‚
â”‚        npm test (è‡ªå‹•é‹è¡Œæ‰€æœ‰æ¸¬è©¦)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥é©Ÿ 3: æŸ¥çœ‹çµæœ                                    â”‚
â”‚ âœ… å…¨éƒ¨é€šé â†’ å¯ä»¥æäº¤                              â”‚
â”‚ âŒ æœ‰å¤±æ•— â†’ æŸ¥çœ‹å¤±æ•—åŸå› ï¼Œä¿®æ”¹ä»£ç¢¼                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥é©Ÿ 4: é‡è¤‡æª¢æ¸¬                                    â”‚
â”‚        npm test (å†æ¬¡æª¢æ¸¬ï¼Œç›´åˆ°å…¨éƒ¨é€šé)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥é©Ÿ 5: æäº¤ä»£ç¢¼                                    â”‚
â”‚        git commit -m "ä¿®æ”¹èªªæ˜"                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¿«é€Ÿæª¢æ¸¬ (å¿«é€Ÿæª¢æŸ¥ï¼Œä¸éœ€å®Œæ•´æ¸¬è©¦)

```bash
# åªæ¸¬è©¦ç‰¹å®šæ¨¡çµ„
npm run test:unit -- --testPathPattern="api"      # åªæ¸¬è©¦ API å±¤
npm run test:unit -- --testPathPattern="core"     # åªæ¸¬è©¦æ ¸å¿ƒå±¤
npm run test:unit -- --testPathPattern="ui"       # åªæ¸¬è©¦ UI å±¤

# ç›£è¦–æ¨¡å¼ (æ”¹äº†ä»£ç¢¼è‡ªå‹•æ¸¬è©¦)
npm run test:watch

# åªæ¸¬è©¦ç›¸é—œæ–‡ä»¶ (åŸºæ–¼ Git è®Šæ›´)
npm test -- --onlyChanged
```

### è©³ç´°æª¢æ¸¬ (å…¨é¢æª¢æŸ¥ï¼Œäº†è§£ç´°ç¯€)

```bash
# è©³ç´°è¼¸å‡ºæ‰€æœ‰æ¸¬è©¦çµæœ
npm run test:verbose

# ç”Ÿæˆæ¸¬è©¦è¦†è“‹å ±å‘Š
npm run test:coverage

# ç”Ÿæˆ HTML å ±å‘Š (åœ¨ç€è¦½å™¨ä¸­æŸ¥çœ‹)
npm run test:coverage -- --collectCoverageFrom="js/layers/**/*.js"
```

---

## ğŸ“‹ å„å±¤ç´šæª¢æ¸¬

### 1ï¸âƒ£ API å±¤æª¢æ¸¬

#### ä¿®æ”¹ ProxyClient å¾Œ

```bash
# æª¢æ¸¬ API å±¤ä»£ç¢¼
npm run test:unit -- --testPathPattern="api"

# æˆ–è€…æŒ‡å®šæ–‡ä»¶
npm test tests/unit/api/proxy-client.test.js
```

#### è‡ªå‹•æª¢æ¸¬ç¯„åœ
```javascript
// æœƒè‡ªå‹•æª¢æ¸¬:
âœ… API ç«¯é»é€£æ¥
âœ… éŒ¯èª¤è™•ç†é‚è¼¯
âœ… é‡è©¦æ©Ÿåˆ¶
âœ… åƒæ•¸é©—è­‰
âœ… è¶…æ™‚ç®¡ç†
âœ… ç·©å­˜è¡Œç‚º
```

#### æª¢æ¸¬æ¨™æº–
```
é€šéæ¨™æº–:
- API èª¿ç”¨æˆåŠŸ âœ…
- éŒ¯èª¤è™•ç†æ­£ç¢º âœ…
- é‡è©¦é‚è¼¯å·¥ä½œ âœ…
- åƒæ•¸é©—è­‰ç”Ÿæ•ˆ âœ…
- è¶…æ™‚æ§åˆ¶æº–ç¢º âœ…

å¤±æ•—æç¤º:
âŒ "Cannot read properties of undefined"
âŒ "Network error not handled"
âŒ "Retry logic failed"
```

---

### 2ï¸âƒ£ æ ¸å¿ƒå±¤æª¢æ¸¬

#### ä¿®æ”¹ BacktestEngine / StrategyManager / Indicators å¾Œ

```bash
# æª¢æ¸¬æ ¸å¿ƒå±¤ä»£ç¢¼
npm run test:unit -- --testPathPattern="core"

# æˆ–è€…æŒ‡å®šæ¨¡çµ„
npm test tests/unit/core/backtest-engine.test.js
npm test tests/unit/core/strategy-manager.test.js
npm test tests/unit/core/indicators.test.js
```

#### è‡ªå‹•æª¢æ¸¬ç¯„åœ
```javascript
// æœƒè‡ªå‹•æª¢æ¸¬:
âœ… å›æ¸¬è¨ˆç®—é‚è¼¯
âœ… ç­–ç•¥åŸ·è¡Œæµç¨‹
âœ… æŠ€è¡“æŒ‡æ¨™è¨ˆç®—
âœ… æ•¸æ“šè¼¸å…¥/è¼¸å‡º
âœ… é‚Šç•Œæƒ…æ³è™•ç†
âœ… æ€§èƒ½åŸºæº–
```

#### æª¢æ¸¬æ¨™æº–
```
é€šéæ¨™æº–:
- è¨ˆç®—çµæœæº–ç¢º âœ…
- é‚Šç•Œæƒ…æ³æ­£ç¢º âœ…
- æ€§èƒ½åœ¨åŸºæº–å…§ âœ…
- éŒ¯èª¤è™•ç†å®Œå–„ âœ…

å¤±æ•—æç¤º:
âŒ "Expected X but got Y"
âŒ "Calculation exceeded time limit"
âŒ "Edge case not handled"
```

---

### 3ï¸âƒ£ UI å±¤æª¢æ¸¬

#### ä¿®æ”¹ UIController / AppState å¾Œ

```bash
# æª¢æ¸¬ UI å±¤ä»£ç¢¼
npm run test:unit -- --testPathPattern="ui"

# æˆ–è€…æŒ‡å®šæ¨¡çµ„
npm test tests/unit/ui/ui-controller.test.js
npm test tests/unit/ui/state-manager.test.js
```

#### è‡ªå‹•æª¢æ¸¬ç¯„åœ
```javascript
// æœƒè‡ªå‹•æª¢æ¸¬:
âœ… DOM æ“ä½œ
âœ… äº‹ä»¶è™•ç†
âœ… ç‹€æ…‹åŒæ­¥
âœ… è¡¨å–®é©—è­‰
âœ… ç”¨æˆ¶äº¤äº’
âœ… ç·©å­˜ç®¡ç†
```

#### æª¢æ¸¬æ¨™æº–
```
é€šéæ¨™æº–:
- DOM æ›´æ–°æ­£ç¢º âœ…
- äº‹ä»¶è§¸ç™¼å·¥ä½œ âœ…
- ç‹€æ…‹åŒæ­¥æº–ç¢º âœ…
- é©—è­‰é‚è¼¯å®Œå–„ âœ…

å¤±æ•—æç¤º:
âŒ "Element not found"
âŒ "Event listener not attached"
âŒ "State mismatch"
```

---

### 4ï¸âƒ£ æ•´åˆæ¸¬è©¦æª¢æ¸¬

#### ä¿®æ”¹å¤šå€‹æ¨¡çµ„çš„äº¤äº’é‚è¼¯å¾Œ

```bash
# é‹è¡Œæ•´åˆæ¸¬è©¦
npm run test:integration

# æˆ–è€…é‹è¡Œç‰¹å®šæ•´åˆæ¸¬è©¦
npm test tests/integration/final-integration.test.js
```

#### è‡ªå‹•æª¢æ¸¬ç¯„åœ
```javascript
// æœƒè‡ªå‹•æª¢æ¸¬:
âœ… æ¨¡çµ„é–“é€šä¿¡
âœ… å®Œæ•´å·¥ä½œæµ
âœ… æ•¸æ“šæµå‘
âœ… è·¨å±¤äº¤äº’
âœ… ç³»çµ±ç©©å®šæ€§
```

#### æª¢æ¸¬æ¨™æº–
```
é€šéæ¨™æº–:
- å®Œæ•´æµç¨‹æ­£å¸¸ âœ…
- æ•¸æ“šæµå‘æ­£ç¢º âœ…
- æ‰€æœ‰å±¤å”èª¿å·¥ä½œ âœ…

å¤±æ•—æç¤º:
âŒ "Module communication failed"
âŒ "Data flow broken"
âŒ "Integration test failed"
```

---

## ğŸ“š å¸¸è¦‹å ´æ™¯æŒ‡å—

### å ´æ™¯ 1: ä¿®æ”¹æŠ€è¡“æŒ‡æ¨™è¨ˆç®—

#### ä»£ç¢¼ä¿®æ”¹
```javascript
// ä¿®æ”¹ js/layers/core/indicators.js
calculateSMA = (prices, period) => {
    // ä½ çš„æ–°å¯¦ç¾
    return results;
};
```

#### è‡ªå‹•æª¢æ¸¬å‘½ä»¤
```bash
# æ­¥é©Ÿ 1: é‹è¡ŒæŒ‡æ¨™æ¸¬è©¦
npm test tests/unit/core/indicators.test.js

# æ­¥é©Ÿ 2: æŸ¥çœ‹è¦†è“‹å ±å‘Š
npm run test:coverage -- --testPathPattern="indicators"

# æ­¥é©Ÿ 3: é‹è¡Œç›¸é—œæ•´åˆæ¸¬è©¦
npm run test:integration
```

#### æª¢æ¸¬æœƒé©—è­‰
```
âœ… è¨ˆç®—ç²¾åº¦
âœ… é‚Šç•Œæƒ…æ³ (ç©ºæ•¸çµ„ã€å–®å€‹å€¼ã€ç•°å¸¸å€¼)
âœ… æ€§èƒ½ (1000+ æ•¸æ“šé»)
âœ… è¿”å›å€¼æ ¼å¼
âœ… èˆ‡å…¶ä»–æŒ‡æ¨™çš„å…¼å®¹æ€§
```

#### æ•…éšœè¨ºæ–·
```
å¦‚æœæ¸¬è©¦å¤±æ•—:
âŒ "Expected 100.5 but got 100.4"
   â†’ æª¢æŸ¥è¨ˆç®—å…¬å¼

âŒ "TypeError: prices.map is not a function"
   â†’ æª¢æŸ¥è¼¸å…¥åƒæ•¸é¡å‹

âŒ "Test timeout"
   â†’ æª¢æŸ¥ç®—æ³•è¤‡é›œåº¦
```

---

### å ´æ™¯ 2: ä¿®æ”¹å›æ¸¬é‚è¼¯

#### ä»£ç¢¼ä¿®æ”¹
```javascript
// ä¿®æ”¹ js/layers/core/backtest-engine.js
runBacktest = async (config) => {
    // ä½ çš„æ–°å¯¦ç¾
    return results;
};
```

#### è‡ªå‹•æª¢æ¸¬å‘½ä»¤
```bash
# æ­¥é©Ÿ 1: é‹è¡Œå›æ¸¬å¼•æ“æ¸¬è©¦
npm test tests/unit/core/backtest-engine.test.js

# æ­¥é©Ÿ 2: é‹è¡Œæ•´åˆæ¸¬è©¦
npm run test:integration -- --testPathPattern="backtest"

# æ­¥é©Ÿ 3: æª¢æŸ¥è¦†è“‹ç‡
npm run test:coverage
```

#### æª¢æ¸¬æœƒé©—è­‰
```
âœ… å›æ¸¬è¨ˆç®—æ­£ç¢º
âœ… äº¤æ˜“ä¿¡è™Ÿç”Ÿæˆæ­£ç¢º
âœ… çµ±è¨ˆæ•¸æ“šæº–ç¢º
âœ… é‚Šç•Œæƒ…æ³è™•ç†
âœ… æ€§èƒ½åœ¨å¯æ¥å—ç¯„åœ
âœ… èˆ‡ç­–ç•¥çš„äº¤äº’
```

#### æ•…éšœè¨ºæ–·
```
å¦‚æœæ¸¬è©¦å¤±æ•—:
âŒ "Returns incorrect number of trades"
   â†’ æª¢æŸ¥äº¤æ˜“é‚è¼¯

âŒ "Performance result mismatch"
   â†’ æª¢æŸ¥çµ±è¨ˆè¨ˆç®—

âŒ "Integration test failed"
   â†’ æª¢æŸ¥ç­–ç•¥äº¤äº’
```

---

### å ´æ™¯ 3: ä¿®æ”¹ API å®¢æˆ¶ç«¯

#### ä»£ç¢¼ä¿®æ”¹
```javascript
// ä¿®æ”¹ js/layers/api/proxy-client.js
getStockData = async (params) => {
    // ä½ çš„æ–°å¯¦ç¾
    return data;
};
```

#### è‡ªå‹•æª¢æ¸¬å‘½ä»¤
```bash
# æ­¥é©Ÿ 1: é‹è¡Œ API æ¸¬è©¦
npm test tests/unit/api/proxy-client.test.js

# æ­¥é©Ÿ 2: ç›£è¦–æ¨¡å¼ (é‚Šæ”¹é‚Šæ¸¬è©¦)
npm run test:watch -- --testPathPattern="api"

# æ­¥é©Ÿ 3: é‹è¡Œæ•´åˆæ¸¬è©¦
npm run test:integration
```

#### æª¢æ¸¬æœƒé©—è­‰
```
âœ… API ç«¯é»é€£æ¥
âœ… åƒæ•¸æ§‹é€ æ­£ç¢º
âœ… éŒ¯èª¤è™•ç†å®Œå–„
âœ… é‡è©¦æ©Ÿåˆ¶å·¥ä½œ
âœ… ç·©å­˜é‚è¼¯æ­£ç¢º
âœ… è¶…æ™‚ç®¡ç†æº–ç¢º
```

#### æ•…éšœè¨ºæ–·
```
å¦‚æœæ¸¬è©¦å¤±æ•—:
âŒ "Network error not handled properly"
   â†’ æª¢æŸ¥éŒ¯èª¤è™•ç†

âŒ "Retry exceeded max attempts"
   â†’ æª¢æŸ¥é‡è©¦é…ç½®

âŒ "Cache not working"
   â†’ æª¢æŸ¥ç·©å­˜é‚è¼¯
```

---

### å ´æ™¯ 4: æ·»åŠ æ–°ç­–ç•¥

#### ä»£ç¢¼ä¿®æ”¹
```javascript
// åœ¨ js/strategy-plugins/ æ·»åŠ æ–°æ–‡ä»¶
// my-strategy.js

module.exports = {
    name: 'my-strategy',
    description: 'æˆ‘çš„ç­–ç•¥',
    execute: async (data, params) => {
        // å¯¦ç¾
        return signals;
    }
};
```

#### è‡ªå‹•æª¢æ¸¬å‘½ä»¤
```bash
# æ­¥é©Ÿ 1: å‰µå»ºç­–ç•¥æ¸¬è©¦æ–‡ä»¶
# tests/unit/core/strategies/my-strategy.test.js

# æ­¥é©Ÿ 2: é‹è¡Œç­–ç•¥æ¸¬è©¦
npm test tests/unit/core/strategies/my-strategy.test.js

# æ­¥é©Ÿ 3: é‹è¡Œæ•´åˆæ¸¬è©¦ç¢ºä¿å…¼å®¹
npm run test:integration
```

#### æª¢æ¸¬æœƒé©—è­‰
```
âœ… ç­–ç•¥ä»‹é¢æ­£ç¢º
âœ… åƒæ•¸ç¬¦åˆè¦ç¯„
âœ… è¿”å›å€¼æ ¼å¼æ­£ç¢º
âœ… ç•°å¸¸æƒ…æ³è™•ç†
âœ… èˆ‡å›æ¸¬å¼•æ“å…¼å®¹
âœ… æ€§èƒ½å¯æ¥å—
```

---

### å ´æ™¯ 5: ä¿®æ”¹ç‹€æ…‹ç®¡ç†

#### ä»£ç¢¼ä¿®æ”¹
```javascript
// ä¿®æ”¹ js/layers/ui/state-manager.js
setCachedStockData = (data) => {
    // ä½ çš„æ–°å¯¦ç¾
};
```

#### è‡ªå‹•æª¢æ¸¬å‘½ä»¤
```bash
# æ­¥é©Ÿ 1: é‹è¡Œç‹€æ…‹ç®¡ç†æ¸¬è©¦
npm test tests/unit/ui/state-manager.test.js

# æ­¥é©Ÿ 2: ç›£è¦–ç›¸é—œæ¸¬è©¦
npm run test:watch -- --testPathPattern="state"

# æ­¥é©Ÿ 3: æª¢æŸ¥ä¾è³´æ¨¡çµ„
npm run test:integration
```

#### æª¢æ¸¬æœƒé©—è­‰
```
âœ… ç‹€æ…‹æ›´æ–°æ­£ç¢º
âœ… ç·©å­˜å·¥ä½œæ­£å¸¸
âœ… æ•¸æ“šåŒæ­¥æº–ç¢º
âœ… é‚Šç•Œæƒ…æ³è™•ç†
âœ… èˆ‡ UI äº¤äº’æ­£ç¢º
```

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### å•é¡Œ 1: æ¸¬è©¦å¤±æ•—ä½†ä¸çŸ¥é“ç‚ºä»€éº¼

#### è§£æ±ºæ–¹æ¡ˆ

```bash
# 1ï¸âƒ£ é‹è¡Œè©³ç´°è¼¸å‡º
npm run test:verbose

# 2ï¸âƒ£ é‹è¡Œå–®å€‹å¤±æ•—çš„æ¸¬è©¦
npm test -- --testNamePattern="failing test name"

# 3ï¸âƒ£ å•Ÿç”¨èª¿è©¦æ¨¡å¼
node --inspect-brk node_modules/.bin/jest --runInBand

# 4ï¸âƒ£ æŸ¥çœ‹å®Œæ•´çš„éŒ¯èª¤å †æ£§
npm test -- --verbose --no-coverage
```

#### ç†è§£éŒ¯èª¤ä¿¡æ¯

```
âŒ "FAIL tests/unit/api/proxy-client.test.js"
   â†“ æ–‡ä»¶è·¯å¾‘

â— ProxyClient API å®¢æˆ¶ç«¯å±¤ â€º éŒ¯èª¤è™•ç† â€º æ‡‰è©²è™•ç†ç¶²è·¯éŒ¯èª¤
  â†“ æ¸¬è©¦å¥—ä»¶å’Œæ¸¬è©¦åç¨±

Expected: toThrow("Network error")
Received: "Cannot read properties"
  â†“ å…·é«”éŒ¯èª¤

41 | expect(received).toThrow(expected)
   â†“ éŒ¯èª¤ä½ç½®
```

---

### å•é¡Œ 2: æ€§èƒ½æ¸¬è©¦è¶…æ™‚

#### è§£æ±ºæ–¹æ¡ˆ

```bash
# 1ï¸âƒ£ å¢åŠ æ¸¬è©¦è¶…æ™‚æ™‚é–“
npm test -- --testTimeout=30000

# 2ï¸âƒ£ è·³éæ€§èƒ½æ¸¬è©¦é€²è¡Œå¿«é€Ÿæª¢æ¸¬
npm test -- --testNamePattern="^((?!performance).)*$"

# 3ï¸âƒ£ åˆ†ææ€§èƒ½ç“¶é ¸
npm test -- --logHeapUsage

# 4ï¸âƒ£ æª¢æŸ¥ä»£ç¢¼è¤‡é›œåº¦
npm run test:coverage -- --verbose
```

---

### å•é¡Œ 3: Mock æ•¸æ“šä¸æ­£ç¢º

#### è§£æ±ºæ–¹æ¡ˆ

```bash
# 1ï¸âƒ£ æŸ¥çœ‹ setup.js ä¸­çš„ mock å®šç¾©
cat tests/setup.js | grep -A 10 "global.fetch"

# 2ï¸âƒ£ æª¢æŸ¥æ¸¬è©¦ä¸­çš„ mock é…ç½®
npm test -- --verbose

# 3ï¸âƒ£ æ·»åŠ  debug è¼¸å‡º
npm test -- --testNamePattern="your-test" --verbose
```

---

### å•é¡Œ 4: æ¸¬è©¦ç›¸äº’å½±éŸ¿

#### è§£æ±ºæ–¹æ¡ˆ

```bash
# 1ï¸âƒ£ é‹è¡Œå–®å€‹æ¸¬è©¦éš”é›¢
npm test tests/unit/api/proxy-client.test.js

# 2ï¸âƒ£ æ¸…ç†ä¹‹å‰çš„ jest å¿«å–
npm test -- --clearCache

# 3ï¸âƒ£ ç›£è¦–æ¨¡å¼æª¢æŸ¥
npm run test:watch

# 4ï¸âƒ£ é‡æ–°åˆå§‹åŒ–ç’°å¢ƒ
npm install
npm test
```

---

## ğŸ”§ CI/CD é›†æˆ

### æœ¬åœ°è‡ªå‹•æª¢æ¸¬è¨­ç½® (Git Hooks)

#### 1ï¸âƒ£ å®‰è£ Husky (è‡ªå‹•æª¢æ¸¬å·¥å…·)

```bash
npm install husky --save-dev
npx husky install
```

#### 2ï¸âƒ£ æ·»åŠ æäº¤å‰è‡ªå‹•æª¢æ¸¬

```bash
npx husky add .husky/pre-commit "npm test"
```

#### 3ï¸âƒ£ æ·»åŠ æäº¤ä¿¡æ¯æª¢æŸ¥

```bash
npx husky add .husky/commit-msg 'echo "Commit message validation"'
```

**æ•ˆæœ**: æäº¤ä»£ç¢¼å‰è‡ªå‹•é‹è¡Œæ¸¬è©¦ï¼Œå¤±æ•—å‰‡é˜»æ­¢æäº¤ âœ…

---

### GitHub Actions è‡ªå‹•æª¢æ¸¬è¨­ç½®

#### å‰µå»ºæ–‡ä»¶: `.github/workflows/test.yml`

```yaml
name: è‡ªå‹•æª¢æ¸¬

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        node-version: [18.x, 20.x]
    
    steps:
    - uses: actions/checkout@v3
    
    - name: ä½¿ç”¨ Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v3
      with:
        node-version: ${{ matrix.node-version }}
    
    - name: å®‰è£ä¾è³´
      run: npm install
    
    - name: é‹è¡Œå–®å…ƒæ¸¬è©¦
      run: npm run test:unit
    
    - name: é‹è¡Œæ•´åˆæ¸¬è©¦
      run: npm run test:integration
    
    - name: ç”Ÿæˆè¦†è“‹å ±å‘Š
      run: npm run test:coverage
    
    - name: ä¸Šå‚³è¦†è“‹å ±å‘Šåˆ° Codecov
      uses: codecov/codecov-action@v3
      with:
        file: ./coverage/coverage-final.json
        fail_ci_if_error: true
```

**æ•ˆæœ**: æ¯æ¬¡ push æˆ– PR éƒ½è‡ªå‹•é‹è¡Œå®Œæ•´æ¸¬è©¦ âœ…

---

### Netlify è‡ªå‹•æª¢æ¸¬è¨­ç½®

#### åœ¨ `netlify.toml` ä¸­æ·»åŠ 

```toml
[build]
  command = "npm test && npm run build"
  publish = "dist"

[build.environment]
  NODE_ENV = "production"

# é è¦½ç’°å¢ƒè‡ªå‹•æª¢æ¸¬
[build.processing]
  skip_processing = false
```

**æ•ˆæœ**: éƒ¨ç½²å‰è‡ªå‹•é‹è¡Œæ¸¬è©¦ âœ…

---

## ğŸ“Š æª¢æ¸¬å ±å‘Šè§£è®€

### è¦†è“‹ç‡å ±å‘Š

```bash
npm run test:coverage
```

çµæœç¤ºä¾‹:
```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
File            | % Stmts | % Branch | % Funcs | % Lines
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
All files       |   82.9  |   75.3   |   80.1  |   83.1
 api/           |   92.0  |   88.5   |   90.0  |   92.1
 core/          |   85.2  |   78.9   |   82.3  |   85.5
 ui/            |   75.3  |   70.2   |   76.8  |   76.2
 utils/         |   95.1  |   92.3   |   94.5  |   95.2
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

**è§£è®€**:
- **% Stmts**: èªå¥è¦†è“‹ (82.9% = å¥½)
- **% Branch**: åˆ†æ”¯è¦†è“‹ (75.3% = ä¸­ç­‰)
- **% Funcs**: å‡½æ•¸è¦†è“‹ (80.1% = å¥½)
- **% Lines**: è¡Œè¦†è“‹ (83.1% = å¥½)

**ç›®æ¨™**: éƒ½é”åˆ° 80% ä»¥ä¸Š âœ…

---

### è©³ç´°æ¸¬è©¦çµæœ

```bash
npm run test:verbose
```

è§£è®€:
```
âœ… PASS - æ¸¬è©¦é€šé
âŒ FAIL - æ¸¬è©¦å¤±æ•—
âŠ˜ SKIP - æ¸¬è©¦è·³é
â— æœªå®Œæˆ - æ¸¬è©¦è¶…æ™‚æˆ–ç•°å¸¸

ç¸½çµ:
Test Suites: 18 passed, 18 total (æˆåŠŸ)
Tests:       264 passed, 264 total (å…¨éƒ¨é€šé)
Snapshots:   0 total (æ²’æœ‰å¿«ç…§)
Time:        18.754 s (ç¸½è€—æ™‚)
```

---

## ğŸ“‹ æœ€ä½³å¯¦è¸æª¢æ¸…å–®

### æ¯æ¬¡æäº¤å‰æª¢æŸ¥æ¸…å–®

```
â–¡ ä¿®æ”¹ä»£ç¢¼å®Œæˆ
â–¡ é‹è¡Œ npm test (æ‰€æœ‰æ¸¬è©¦é€šé)
â–¡ é‹è¡Œ npm run test:coverage (è¦†è“‹ç‡æ»¿è¶³è¦æ±‚)
â–¡ é‹è¡Œ npm run test:verbose (æŸ¥çœ‹è©³ç´°çµæœ)
â–¡ æª¢æŸ¥æ˜¯å¦æœ‰æ–°çš„è­¦å‘Šæˆ–éŒ¯èª¤
â–¡ æäº¤ä»£ç¢¼

âœ… æ‰€æœ‰é …ç›®é€šéå¾Œï¼Œå®‰å¿ƒæäº¤!
```

### æ–°å¢åŠŸèƒ½æª¢æŸ¥æ¸…å–®

```
â–¡ åŠŸèƒ½ä»£ç¢¼å®Œæˆ
â–¡ å‰µå»ºå°æ‡‰æ¸¬è©¦æ–‡ä»¶
â–¡ å–®å€‹æ¸¬è©¦é‹è¡Œé€šé
â–¡ æ•´åˆæ¸¬è©¦é‹è¡Œé€šé
â–¡ è¦†è“‹ç‡é”åˆ° 80%+
â–¡ æ²’æœ‰æ–°å¢è­¦å‘Š

âœ… æº–å‚™æäº¤!
```

### ä¿®æ”¹ç¾æœ‰åŠŸèƒ½æª¢æŸ¥æ¸…å–®

```
â–¡ ä¿®æ”¹ä»£ç¢¼å®Œæˆ
â–¡ ç›¸é—œæ¸¬è©¦é‹è¡Œé€šé
â–¡ ä¸èƒ½ç ´å£å…¶ä»–æ¸¬è©¦
â–¡ è¦†è“‹ç‡ä¸èƒ½ä¸‹é™
â–¡ æ€§èƒ½ä¸èƒ½ä¸‹é™

âœ… æº–å‚™æäº¤!
```

---

## ğŸ¯ å‘½ä»¤é€ŸæŸ¥è¡¨

### æœ€å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤ | èªªæ˜ | é©ç”¨å ´æ™¯ |
|------|------|---------|
| `npm test` | é‹è¡Œæ‰€æœ‰æ¸¬è©¦ | å…¨é¢æª¢æ¸¬ |
| `npm run test:watch` | ç›£è¦–æ¨¡å¼ | é‚Šæ”¹é‚Šæ¸¬è©¦ |
| `npm run test:coverage` | è¦†è“‹ç‡å ±å‘Š | å“è³ªæª¢æŸ¥ |
| `npm run test:unit` | åªæ¸¬å–®å…ƒ | å¿«é€Ÿæª¢æ¸¬ |
| `npm run test:integration` | åªæ¸¬æ•´åˆ | æª¢æŸ¥äº¤äº’ |
| `npm run test:verbose` | è©³ç´°è¼¸å‡º | é™¤éŒ¯å•é¡Œ |

### æŒ‰å ´æ™¯å¿«é€Ÿå‘½ä»¤

```bash
# ğŸ“ ä¿®æ”¹ä»£ç¢¼å¾Œçš„å¿«é€Ÿæª¢æ¸¬
npm test

# ğŸ”„ é‚Šæ”¹é‚Šæ¸¬è©¦
npm run test:watch

# ğŸ“Š æª¢æŸ¥ä»£ç¢¼è³ªé‡
npm run test:coverage

# ğŸ› èª¿è©¦å¤±æ•—çš„æ¸¬è©¦
npm run test:verbose

# ğŸš€ ç¢ºä¿èƒ½éƒ¨ç½²
npm test && npm run test:coverage

# ğŸ¯ åªæ¸¬è©¦ç‰¹å®šå±¤
npm run test:unit -- --testPathPattern="api"
npm run test:unit -- --testPathPattern="core"
npm run test:unit -- --testPathPattern="ui"
```

---

## âœ… ç¸½çµ

### è‡ªå‹•æª¢æ¸¬çš„ 3 å€‹æ ¸å¿ƒæ­¥é©Ÿ

1. **ä¿®æ”¹ä»£ç¢¼** â†’ åœ¨ `js/layers/` ä¸­ä¿®æ”¹æ–‡ä»¶
2. **é‹è¡Œæª¢æ¸¬** â†’ `npm test` (è‡ªå‹•åŸ·è¡Œæ‰€æœ‰æª¢æ¸¬)
3. **æäº¤ä»£ç¢¼** â†’ æ‰€æœ‰æ¸¬è©¦é€šéå¾Œæäº¤

### æ ¸å¿ƒæ¦‚å¿µ

```
æ¸¬è©¦ = è‡ªå‹•é©—è­‰ = ä¿è­‰è³ªé‡ = å®‰å¿ƒä¿®æ”¹
```

### æª¢æ¸¬å±¤ç´š

```
å–®å…ƒæ¸¬è©¦ (APIå±¤ã€æ ¸å¿ƒå±¤ã€UIå±¤)
    â†“
æ•´åˆæ¸¬è©¦ (å¤šæ¨¡çµ„äº¤äº’)
    â†“
è¦†è“‹ç‡æª¢æŸ¥ (ä»£ç¢¼è¦†è“‹)
    â†“
æ€§èƒ½æª¢æŸ¥ (åŸ·è¡Œé€Ÿåº¦)
    â†“
æ‰€æœ‰é€šé = æº–å‚™ä¸Šç·š âœ…
```

### ä¸‰å¥è©±ç¸½çµ

1. **ä¿®æ”¹å¾Œç¸½æ˜¯é‹è¡Œ `npm test`**
2. **æ‰€æœ‰æ¸¬è©¦é€šéæ‰æäº¤**
3. **ç”¨ç›£è¦–æ¨¡å¼åŠ å¿«é–‹ç™¼é€Ÿåº¦**

---

**ç¥æ‚¨é–‹ç™¼æ„‰å¿«ï¼æœ‰ä»»ä½•å•é¡Œéš¨æ™‚æŸ¥çœ‹æœ¬æŒ‡å—ã€‚ğŸš€**