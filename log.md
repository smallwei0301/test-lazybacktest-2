?plugins=forms,container-queries:64 cdn.tailwindcss.com should not be used in production. To use Tailwind CSS in production, install it as a PostCSS plugin or use the Tailwind CLI: https://tailwindcss.com/docs/installation
(anonymous) @ ?plugins=forms,container-queries:64
main.js:135 [Main] DOM loaded, initializing...
main.js:149 [Main] Initialization completed
backtest.js:4 Chart object: function
backtest.js:5 Available Chart plugins: Array(8)
loader.js:3 [Loader] DOMContentLoaded event fired.
loader.js:6 [Loader] Set workerUrl to: js/worker.js
backtest.js:1454 [Fees] Set default fees for 2330 (isETF: false) -> Buy: 0.1425%, Sell+Tax: 0.4425%
loader.js:130 [Main] Initial setup complete.
loader.js:138 [Loader] Loader script finished.
batch-optimization.js:106 [Batch Optimization] Initializing...
batch-optimization.js:210 [Batch Optimization] Strategy options generated successfully
batch-optimization.js:280 [Batch Optimization] Events bound successfully
batch-optimization.js:143 [Batch Optimization] Initialized successfully
backtest.js:2080 [Market Switch] 市場切換功能已初始化
backtest.js:10 [Main] runBacktestInternal called
backtest.js:14 [Main] Params: Object
backtest.js:16 [Main] Validation: true
backtest.js:30 [Main] WorkerUrl: js/worker.js
backtest.js:31 [Main] Creating worker...
backtest.js:120 [Main] Fetching new data for backtest.
worker.js:961 [Worker] Fetching new data for backtest.
worker.js:108 [Worker] fetchStockData 啟動 for 2330 (TWSE) from 2024-09-19 to 2025-09-19
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
worker.js:268 [Worker] 原始數據 256 筆，最終整理後 244 筆
backtest.js:37 [Main] Received message from worker: stockNameInfo undefined
worker.js:514 [Worker] Starting simulation loop from index 27 to 243
worker.js:595 [Worker LONG] Sell Executed: 91@1035 on 2024-11-15, Profit: -5563, Cap After: 94437
worker.js:595 [Worker LONG] Sell Executed: 87@1060 on 2025-02-14, Profit: -1846, Cap After: 92591
worker.js:595 [Worker LONG] Sell Executed: 102@946 on 2025-06-02, Profit: 3930, Cap After: 96520
worker.js:595 [Worker LONG] Sell Executed: 95@1135 on 2025-08-22, Profit: 11737, Cap After: 108257
worker.js:595 [Worker LONG] Sell Executed: 86@1160 on 2025-09-02, Profit: -584, Cap After: 107674
worker.js:713 [Worker LONG] Final Sell Executed: 83@1285 on 2025-09-18
worker.js:730 [Worker] Strategy date range: 2024-09-19 to 2025-09-19 (startIdx: 27, lastIdx: 243)
worker.js:731 [Worker] Annualization Years (Strategy): 0.9993 (from 2024-09-19 to 2025-09-19)
worker.js:754 [Worker] B&H date range: 2024-09-19 to 2025-09-18 (firstValidPriceIdxBH: 0, lastValidPriceIdxBH: 243)
worker.js:755 [Worker] Annualization Years (B&H): 0.9966 (from 2024-09-19 to 2025-09-18)
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: result {stockNo: '2330', initialCapital: 100000, finalValue: 114114.804325, totalProfit: 14114.804325000005, returnRate: 14.114804325000005, …}
backtest.js:60 [Main] Data cached for 2330.
backtest.js:178 [Main] Executing latest version of handleBacktestResult (v2).
backtest.js:213 [Main] displayBacktestResult called.
backtest.js:478 [Main] displayBacktestResult finished.
backtest.js:543 [Main] displayTradeResults called
backtest.js:747 Creating chart with plugins: {colors: {…}, decimation: {…}, filler: {…}, legend: {…}, subtitle: {…}, …}
main.js:49 [Main] getSuggestion called
main.js:45 [getMaxPeriod] Found max period: 20
main.js:77 [Main] Max Period: 20, Lookback Days for Suggestion: 40
worker.js:1002 [Worker] Received getSuggestion request.
worker.js:899 [Worker Suggestion] Starting simulation for suggestion...
worker.js:946 [Worker Suggestion] Last Point Analysis: buy=false, sell=false, short=false, cover=false. Suggestion: 等待
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: suggestionResult {suggestion: '等待'}
backtest.js:1708 [Stock Name v9.3] 查詢股票名稱: 3260 (市場: TWSE)
backtest.js:1805 [TPEX Name] 查詢股票代碼: 3260
backtest.js:1874 [TPEX Proxy Name] Fetching name for 3260 via proxy: /.netlify/functions/tpex-proxy?stockNo=3260&date=113/01/01
backtest.js:1997 [Market Switch] 切換到 TPEX 查詢 3260
backtest.js:1805 [TPEX Name] 查詢股票代碼: 3260
backtest.js:1874 [TPEX Proxy Name] Fetching name for 3260 via proxy: /.netlify/functions/tpex-proxy?stockNo=3260&date=113/01/01
backtest.js:1454 [Fees] Set default fees for 3260 (isETF: false) -> Buy: 0.1425%, Sell+Tax: 0.4425%
backtest.js:10 [Main] runBacktestInternal called
backtest.js:14 [Main] Params: {stockNo: '3260', startDate: '2024-09-19', endDate: '2025-09-19', initialCapital: 100000, positionSize: 100, …}
backtest.js:16 [Main] Validation: true
backtest.js:30 [Main] WorkerUrl: js/worker.js
backtest.js:31 [Main] Creating worker...
backtest.js:120 [Main] Fetching new data for backtest.
worker.js:961 [Worker] Fetching new data for backtest.
worker.js:108 [Worker] fetchStockData 啟動 for 3260 (TPEX) from 2024-09-19 to 2025-09-19
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:1708 [Stock Name v9.3] 查詢股票名稱: 3260 (市場: TPEX)
backtest.js:1805 [TPEX Name] 查詢股票代碼: 3260
backtest.js:1874 [TPEX Proxy Name] Fetching name for 3260 via proxy: /.netlify/functions/tpex-proxy?stockNo=3260&date=113/01/01
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
worker.js:268 [Worker] 原始數據 56472 筆，最終整理後 243 筆
backtest.js:37 [Main] Received message from worker: stockNameInfo undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
/js/worker.js:514 [Worker] Starting simulation loop from index 27 to 242
/js/worker.js:595 [Worker LONG] Sell Executed: 1172@82.48320007324219 on 2024-11-29, Profit: -3674, Cap After: 96326
/js/worker.js:595 [Worker LONG] Sell Executed: 1305@83.14533996582031 on 2025-03-28, Profit: 11727, Cap After: 108053
/js/worker.js:595 [Worker LONG] Sell Executed: 1290@88.5370101928711 on 2025-06-30, Profit: 13751, Cap After: 121804
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
/js/worker.js:713 [Worker LONG] Final Sell Executed: 1100@137 on 2025-09-18
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
/js/worker.js:730 [Worker] Strategy date range: 2024-09-19 to 2025-09-19 (startIdx: 27, lastIdx: 242)
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: progress undefined
/js/worker.js:731 [Worker] Annualization Years (Strategy): 0.9993 (from 2024-09-19 to 2025-09-19)
backtest.js:37 [Main] Received message from worker: progress undefined
/js/worker.js:754 [Worker] B&H date range: 2024-09-19 to 2025-09-18 (firstValidPriceIdxBH: 0, lastValidPriceIdxBH: 242)
/js/worker.js:755 [Worker] Annualization Years (B&H): 0.9966 (from 2024-09-19 to 2025-09-18)
backtest.js:37 [Main] Received message from worker: progress undefined
backtest.js:37 [Main] Received message from worker: result {stockNo: '3260', initialCapital: 100000, finalValue: 171924.86989191076, totalProfit: 71924.86989191076, returnRate: 71.92486989191076, …}
backtest.js:60 [Main] Data cached for 3260.
backtest.js:178 [Main] Executing latest version of handleBacktestResult (v2).
backtest.js:213 [Main] displayBacktestResult called.
backtest.js:478 [Main] displayBacktestResult finished.
 [Main] displayTradeResults called
 Creating chart with plugins: {colors: {…}, decimation: {…}, filler: {…}, legend: {…}, subtitle: {…}, …}
 [Main] getSuggestion called
 [getMaxPeriod] Found max period: 20
 [Main] Max Period: 20, Lookback Days for Suggestion: 40
/js/worker.js:1002 [Worker] Received getSuggestion request.
/js/worker.js:899 [Worker Suggestion] Starting simulation for suggestion...
/js/worker.js:946 [Worker Suggestion] Last Point Analysis: buy=false, sell=false, short=false, cover=false. Suggestion: 等待
 [Main] Received message from worker: progress undefined
 [Main] Received message from worker: progress undefined
 [Main] Received message from worker: suggestionResult {suggestion: '等待'}

Function tpex-proxy
Sep 19, 02:27:27 PM: 8686b697 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:27 PM: 8686b697 Duration: 94.59 ms	Memory Usage: 153 MB
Sep 19, 02:27:28 PM: da231fe5 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:28 PM: da231fe5 Duration: 68.56 ms	Memory Usage: 153 MB
Sep 19, 02:27:29 PM: 91493df5 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:29 PM: 91493df5 Duration: 48.53 ms	Memory Usage: 153 MB
Sep 19, 02:27:30 PM: bf8b8c2f INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:30 PM: bf8b8c2f Duration: 45.74 ms	Memory Usage: 153 MB
Sep 19, 02:27:31 PM: 8a9584a3 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:31 PM: 8a9584a3 Duration: 42.38 ms	Memory Usage: 153 MB
Sep 19, 02:27:32 PM: 5b537962 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:32 PM: 5b537962 Duration: 86.98 ms	Memory Usage: 153 MB
Sep 19, 02:27:33 PM: 8a904501 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:33 PM: 8a904501 Duration: 44.8 ms	Memory Usage: 153 MB
Sep 19, 02:27:34 PM: 17d74831 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:34 PM: 17d74831 Duration: 35.6 ms	Memory Usage: 153 MB
Sep 19, 02:27:34 PM: c3f77e7a INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:34 PM: c3f77e7a Duration: 36.76 ms	Memory Usage: 153 MB
Sep 19, 02:27:35 PM: 955dfc74 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:35 PM: 955dfc74 Duration: 50.69 ms	Memory Usage: 153 MB
Sep 19, 02:27:36 PM: 4b0eb522 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:36 PM: 4b0eb522 Duration: 36.74 ms	Memory Usage: 153 MB
Sep 19, 02:27:37 PM: 8f2a133a INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:37 PM: 8f2a133a Duration: 40.02 ms	Memory Usage: 153 MB
Sep 19, 02:27:38 PM: 0a174ac0 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:38 PM: 0a174ac0 Duration: 39.88 ms	Memory Usage: 153 MB
Sep 19, 02:27:39 PM: b435e706 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:39 PM: b435e706 Duration: 44.64 ms	Memory Usage: 153 MB
Sep 19, 02:27:40 PM: ce51993c INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:40 PM: ce51993c Duration: 32.59 ms	Memory Usage: 153 MB
Sep 19, 02:27:40 PM: 2d5edfa7 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:41 PM: 2d5edfa7 Duration: 74.65 ms	Memory Usage: 153 MB
Sep 19, 02:27:41 PM: 0fcf457a INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:41 PM: 0fcf457a Duration: 37.55 ms	Memory Usage: 153 MB
Sep 19, 02:27:42 PM: ccd6c7f4 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:42 PM: ccd6c7f4 Duration: 40.44 ms	Memory Usage: 153 MB
Sep 19, 02:27:43 PM: 778a3503 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:43 PM: 778a3503 Duration: 32.35 ms	Memory Usage: 153 MB
Sep 19, 02:27:44 PM: 1ee31bc9 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:44 PM: 1ee31bc9 Duration: 50.81 ms	Memory Usage: 154 MB
Sep 19, 02:27:45 PM: 72a95f6e INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:45 PM: 72a95f6e Duration: 53.3 ms	Memory Usage: 158 MB
Sep 19, 02:27:46 PM: 83b5f9d5 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:46 PM: 83b5f9d5 Duration: 69.55 ms	Memory Usage: 158 MB
Sep 19, 02:27:46 PM: e8465666 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:46 PM: e8465666 Duration: 38.66 ms	Memory Usage: 158 MB
Sep 19, 02:27:47 PM: 2ff40d30 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:47 PM: 2ff40d30 Duration: 45.21 ms	Memory Usage: 158 MB
Sep 19, 02:27:48 PM: 81802d78 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:48 PM: 81802d78 Duration: 42.8 ms	Memory Usage: 158 MB
Sep 19, 02:27:49 PM: eed357cd INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:49 PM: eed357cd Duration: 56.6 ms	Memory Usage: 159 MB
Sep 19, 02:27:50 PM: 891a78b0 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:50 PM: 891a78b0 Duration: 75.3 ms	Memory Usage: 159 MB
Sep 19, 02:27:51 PM: d676bf63 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:51 PM: d676bf63 Duration: 36.52 ms	Memory Usage: 159 MB
Sep 19, 02:27:51 PM: c6015911 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:51 PM: c6015911 Duration: 32.38 ms	Memory Usage: 159 MB
Sep 19, 02:27:52 PM: 7b8636d7 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:52 PM: 7b8636d7 Duration: 37.66 ms	Memory Usage: 159 MB
Sep 19, 02:27:53 PM: f2d12a1d INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:53 PM: f2d12a1d Duration: 76.65 ms	Memory Usage: 159 MB
Sep 19, 02:27:54 PM: 1798ad1e INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:54 PM: 1798ad1e Duration: 36.59 ms	Memory Usage: 159 MB
Sep 19, 02:27:55 PM: 0448c104 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:55 PM: 0448c104 Duration: 31.84 ms	Memory Usage: 159 MB
Sep 19, 02:27:56 PM: 3c9c4134 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:56 PM: 3c9c4134 Duration: 36 ms	Memory Usage: 159 MB
Sep 19, 02:27:57 PM: f4baee01 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:57 PM: f4baee01 Duration: 53.07 ms	Memory Usage: 159 MB
Sep 19, 02:27:57 PM: de6a2581 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:57 PM: de6a2581 Duration: 74.33 ms	Memory Usage: 159 MB
Sep 19, 02:27:58 PM: d672bd3d INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:58 PM: d672bd3d Duration: 43.16 ms	Memory Usage: 159 MB
Sep 19, 02:27:59 PM: 65205140 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:27:59 PM: 65205140 Duration: 41.03 ms	Memory Usage: 159 MB
Sep 19, 02:28:00 PM: 8790227f INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:00 PM: 8790227f Duration: 37.83 ms	Memory Usage: 159 MB
Sep 19, 02:28:01 PM: a215ec41 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:01 PM: a215ec41 Duration: 80.38 ms	Memory Usage: 160 MB
Sep 19, 02:28:02 PM: 1585368a INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:02 PM: 1585368a Duration: 45.49 ms	Memory Usage: 160 MB
Sep 19, 02:28:02 PM: 333a2452 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:02 PM: 333a2452 Duration: 37.29 ms	Memory Usage: 160 MB
Sep 19, 02:28:03 PM: d8b77a9d INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:03 PM: d8b77a9d Duration: 31.88 ms	Memory Usage: 160 MB
Sep 19, 02:28:04 PM: 9c3322f5 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:04 PM: 9c3322f5 Duration: 37.56 ms	Memory Usage: 160 MB
Sep 19, 02:28:05 PM: bad58edd INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:05 PM: bad58edd Duration: 47.6 ms	Memory Usage: 160 MB
Sep 19, 02:28:06 PM: e01a453e INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:06 PM: e01a453e Duration: 83.12 ms	Memory Usage: 160 MB
Sep 19, 02:28:07 PM: 8354815a INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:07 PM: 8354815a Duration: 39.22 ms	Memory Usage: 160 MB
Sep 19, 02:28:07 PM: 84b6b149 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:08 PM: 84b6b149 Duration: 34.23 ms	Memory Usage: 160 MB
Sep 19, 02:28:08 PM: 336d8f7d INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:08 PM: 336d8f7d Duration: 38.32 ms	Memory Usage: 160 MB
Sep 19, 02:28:09 PM: 178935f0 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:09 PM: 178935f0 Duration: 41.06 ms	Memory Usage: 160 MB
Sep 19, 02:28:10 PM: 1ce31970 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:10 PM: 1ce31970 Duration: 84.59 ms	Memory Usage: 160 MB
Sep 19, 02:28:11 PM: 846748dd INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:11 PM: 846748dd Duration: 43.33 ms	Memory Usage: 160 MB
Sep 19, 02:28:12 PM: 0479387e INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:12 PM: 0479387e Duration: 30.92 ms	Memory Usage: 160 MB
Sep 19, 02:28:12 PM: 61d01c38 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:12 PM: 61d01c38 Duration: 32.04 ms	Memory Usage: 160 MB
Sep 19, 02:28:13 PM: 703a2ad4 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:13 PM: 703a2ad4 Duration: 34.78 ms	Memory Usage: 160 MB
Sep 19, 02:28:14 PM: 56d753c2 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:14 PM: 56d753c2 Duration: 42.97 ms	Memory Usage: 164 MB
Sep 19, 02:28:15 PM: 54ed5804 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:15 PM: 54ed5804 Duration: 40.95 ms	Memory Usage: 168 MB
Sep 19, 02:28:16 PM: 88a6473e INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:16 PM: 88a6473e Duration: 45.37 ms	Memory Usage: 172 MB
Sep 19, 02:28:17 PM: 88f44490 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:17 PM: 88f44490 Duration: 49.54 ms	Memory Usage: 177 MB
Sep 19, 02:28:17 PM: 01242bec INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:18 PM: 01242bec Duration: 50.28 ms	Memory Usage: 182 MB
Sep 19, 02:28:18 PM: c91a72e2 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:28:18 PM: c91a72e2 Duration: 80.14 ms	Memory Usage: 187 MB
Sep 19, 02:31:34 PM: 9214e421 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:34 PM: 9214e421 Duration: 86.12 ms	Memory Usage: 187 MB
Sep 19, 02:31:35 PM: e6fba51d INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:35 PM: e6fba51d Duration: 37.21 ms	Memory Usage: 187 MB
Sep 19, 02:31:38 PM: 4e7c3d4a INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:38 PM: 4e7c3d4a Duration: 34.67 ms	Memory Usage: 187 MB
Sep 19, 02:31:39 PM: 47cab956 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:39 PM: 47cab956 Duration: 34.88 ms	Memory Usage: 187 MB
Sep 19, 02:31:39 PM: 705a9bff INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:39 PM: 705a9bff Duration: 78.69 ms	Memory Usage: 187 MB
Sep 19, 02:31:40 PM: af8fb8c2 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:40 PM: af8fb8c2 Duration: 32.54 ms	Memory Usage: 187 MB
Sep 19, 02:31:41 PM: 7a99fbac INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:41 PM: 7a99fbac Duration: 31.48 ms	Memory Usage: 187 MB
Sep 19, 02:31:42 PM: 662ecb93 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:42 PM: 662ecb93 Duration: 57.21 ms	Memory Usage: 187 MB
Sep 19, 02:31:42 PM: 928db546 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:42 PM: 928db546 Duration: 35.14 ms	Memory Usage: 187 MB
Sep 19, 02:31:43 PM: df8b64ae INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:43 PM: df8b64ae Duration: 87.05 ms	Memory Usage: 187 MB
Sep 19, 02:31:44 PM: 186bca38 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:44 PM: 186bca38 Duration: 69.46 ms	Memory Usage: 187 MB
Sep 19, 02:31:45 PM: fa22f426 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:45 PM: fa22f426 Duration: 32.42 ms	Memory Usage: 187 MB
Sep 19, 02:31:46 PM: 69b376d3 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:46 PM: 69b376d3 Duration: 37.89 ms	Memory Usage: 187 MB
Sep 19, 02:31:47 PM: b5fea46b INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:47 PM: b5fea46b Duration: 36.75 ms	Memory Usage: 187 MB
Sep 19, 02:31:48 PM: 147ae371 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:48 PM: 147ae371 Duration: 34.4 ms	Memory Usage: 187 MB
Sep 19, 02:31:49 PM: 2333a0c0 INFO   [TPEX Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 3260.TWO
Sep 19, 02:31:49 PM: 2333a0c0 Duration: 34.49 ms	Memory Usage: 187 MB
Function twse-proxy
Sep 19, 02:31:07 PM: 5d2b4128 INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20240901
Sep 19, 02:31:07 PM: 5d2b4128 Duration: 210.08 ms	Memory Usage: 108 MB
Sep 19, 02:31:07 PM: 2cdde9e4 INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20241001
Sep 19, 02:31:07 PM: 2cdde9e4 Duration: 23.98 ms	Memory Usage: 110 MB
Sep 19, 02:31:08 PM: 5492c264 INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20241101
Sep 19, 02:31:08 PM: 5492c264 Duration: 358.29 ms	Memory Usage: 132 MB
Sep 19, 02:31:09 PM: 9cf085ec INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20241201
Sep 19, 02:31:09 PM: 9cf085ec Duration: 33.21 ms	Memory Usage: 132 MB
Sep 19, 02:31:09 PM: dd30524a INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20250101
Sep 19, 02:31:09 PM: dd30524a Duration: 23.9 ms	Memory Usage: 132 MB
Sep 19, 02:31:10 PM: 023a8fd8 INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20250201
Sep 19, 02:31:10 PM: 023a8fd8 Duration: 32.74 ms	Memory Usage: 132 MB
Sep 19, 02:31:11 PM: 93d130ac INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20250301
Sep 19, 02:31:11 PM: 93d130ac Duration: 37.47 ms	Memory Usage: 132 MB
Sep 19, 02:31:11 PM: 756c09f6 INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20250401
Sep 19, 02:31:11 PM: 756c09f6 Duration: 22.59 ms	Memory Usage: 132 MB
Sep 19, 02:31:12 PM: 7cf8f6d6 INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20250501
Sep 19, 02:31:12 PM: 7cf8f6d6 Duration: 24.89 ms	Memory Usage: 132 MB
Sep 19, 02:31:13 PM: 5b914e58 INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20250601
Sep 19, 02:31:13 PM: 5b914e58 Duration: 22.78 ms	Memory Usage: 132 MB
Sep 19, 02:31:13 PM: e4d2d92c INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20250701
Sep 19, 02:31:13 PM: e4d2d92c Duration: 21.42 ms	Memory Usage: 132 MB
Sep 19, 02:31:14 PM: a7d15859 INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20250801
Sep 19, 02:31:14 PM: a7d15859 Duration: 18.59 ms	Memory Usage: 132 MB
Sep 19, 02:31:15 PM: 6a5f77bd INFO   [TWSE Proxy v9.4] 命中 Tier 1 快取 (Blobs) for 2330_20250901
Sep 19, 02:31:15 PM: 6a5f77bd Duration: 30.57 ms	Memory Usage: 132 MB
### 2024-10-15 — LB-ADJ-ENDPOINT-20241015A / LB-ADJ-PIPE-20241015A
- 新增 AdjustedPriceProxy v1.1 除錯日誌（輸出請求參數、資料筆數、調整事件統計）。
- Worker Data Acquisition v11.1 將 Yahoo Finance 作為主要還原來源，若偵測不足則自動啟用 adjusted-price 備援 API，並輸出備援啟動與結果紀錄。
- Worker 快取項目記錄備援來源與版本資訊，以便後續排查 502 狀況。

### 2024-10-20 — LB-DATASOURCE-20241020A
- Data Source Tester v3.5.3 新增「備援還原 (TWSE + FinMind)」測試按鈕，支援直接驗證 adjusted-price 備援 API。
- 測試結果面板會顯示備援 API 的調整事件筆數與版本代碼，方便追蹤部署版本。
- 還原股價提示文案同步更新，提醒使用者在 Yahoo 缺漏時改測備援機制。

### 2024-10-22 — LB-TWSE-YAHOO-20241022A / LB-TPEX-YAHOO-20241022A
- TWSE Proxy v10.6 與 TPEX Proxy v10.6 在強制 Yahoo 還原來源時，改為共用單次抓取結果並優先讀取快取，避免跨月重複呼叫 Yahoo API 造成 504 超時。
- Yahoo 強制測試若命中既有快取，會沿用快取來源標籤，確保資料來源摘要與回測結果一致。

### 2024-10-25 — LB-ADJ-ENDPOINT-20241025B
- AdjustedPriceProxy v1.2 將 FinMind 股利抓取拆分為 5 年區間的序列請求，並加入逾時計時與段落間緩衝，避免一次抓取 40 年資料導致 Netlify Lambda 逾時 (HTTP 502)。
- 新增 proxy Request 建構器，確保於 Netlify Functions 內部呼叫 TWSE/TPEX 代理時能附帶固定 User-Agent 並相容於 Node 18 的 Request 物件。
- 除錯日誌輸出補充 start/end 區間與 FinMind 段落筆數，方便追蹤備援來源的實際載入耗時。

### 2024-10-31 — LB-ADJ-ENDPOINT-20241031A
- AdjustedPriceProxy v1.3 改採除權息日聚合演算法，先彙總 FinMind 股利紀錄並使用實際參考價/除權後收盤價計算單次調整因子，避免除息期間仍顯示 0 筆調整事件。
- 調整還原流程改為對應除權息日索引批次套用累積因子，確保前一交易日之前的價格都會回溯更新並輸出對應的現金/股票股利資訊供除錯。

### 2024-11-02 — LB-ADJ-ENDPOINT-20241102A
- AdjustedPriceProxy v1.4 將單次調整因子改為以「前一交易日收盤價」與 FinMind 除息參考價計算，並同步考慮現金/股票股利複合事件，確保除息區間會正確產生還原事件。
- 調整事件紀錄新增參考價、前一日收盤與現金/股票調整因子，方便備援 API 在 Netlify Console 中持續追蹤調整過程。

### 2024-11-05 — LB-ADJ-ENDPOINT-20241105A
- AdjustedPriceProxy v1.5 為 FinMind 股利抓取加入重試與指數回退機制，針對 5xx、逾時或網路錯誤自動補抓，降低備援端點出現 HTTP 502 的機率。
- 若 FinMind 仍無法取得資料，會以 degraded 狀態回應原始行情並附帶 warnings，讓前端與營運能持續獲得 API 回應並保留除錯資訊。

### 2024-11-08 — LB-ADJ-ENDPOINT-20241108A
- AdjustedPriceProxy v1.6 加入測試覆寫注入機制，允許以模擬的 TWSE/TPEX/FinMind 回應執行自動化回歸測試。
- 建立 node:test 驗證流程，確保 FinMind 失敗時會回傳 degraded warnings 與 diagnostics，方便持續追蹤備援 API 穩定度。

### 2024-11-09 — LB-ADJ-ENDPOINT-20241109A
- AdjustedPriceProxy v1.6.1 修正 Netlify 打包後的 handler 命名衝突，改以 proxyHandler 轉呼叫 TWSE/TPEX 代理，避免「handler2 is not a function」導致備援來源回傳 502。
- 若偵測到代理函式非預期類型，立即回報結構化錯誤訊息並輸出除錯日誌，避免靜默失敗影響前端回測流程。

### 2024-11-10 — LB-ADJ-ENDPOINT-20241110A
- AdjustedPriceProxy v1.6.2 新增代理函式解析器，支援 Netlify 打包後以 `handler` 或 `default` 匯出的 TWSE/TPEX 模組，避免備援 API 因匯出型別差異回報「原始資料服務處理函式無效」。
- 當檢測到代理函式不存在時，於除錯日誌輸出模組鍵值資訊，加速追蹤 Lambda 回傳 0 狀態碼的錯誤來源。

### 2024-11-12 — LB-ADJ-ENDPOINT-20241112A / LB-TWSE-FINMIND-20241112A / LB-TPEX-FINMIND-20241112A
- AdjustedPriceProxy v1.6.3 將代理解析改為遞迴掃描 `handler`、`default`、`handler2` 等屬性並回報原始模組鍵值，避免 Netlify 打包後再次出現「原始資料服務處理函式無效」。
- TWSE Proxy v10.7 與 TPEX Proxy v10.7 對 FinMind 備援加入逾時控制、指數退避重試與詳細日誌，遇到 5xx/504 或網路逾時時會自動重試並記錄下一次嘗試時機。
- FinMind 失敗後回傳的錯誤訊息統一透過 `normaliseFinMindErrorMessage` 正規化，確保 Data Source Tester 能取得具體診斷資訊持續追蹤備援來源狀態。
