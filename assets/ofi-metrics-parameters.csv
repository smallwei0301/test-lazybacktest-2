level,component,formula,normalization_or_threshold,weights_or_parameters,notes
"前置","CSCV 分段","S=desiredSegments=10; |I_t|=|O_t|=S/2; A_k(X)=agg{M_{k,s}|s∈X}","每段至少 minPointsPerSegment=5；不足時前段補一筆","aggregator=median (可改 mean)","對應 DEFAULT_CONFIG.desiredSegments 與 aggregator"
"Flow","OOS 分位 q_t","q_t=rank(A_{k^*}(O_t))/(K+1)","clamp 至 [1/(K+1+ε), 1-1/(K+1+ε)], ε=1e-6","依有效 OOS 樣本計算排名","避免 λ 無限大"
"Flow","λ_t","λ_t=log(q_t/(1-q_t))","與 q_t 同步","-","作為 PBO 判斷指標"
"Flow","R^PBO","R^PBO=1-(1/T)∑1_{λ_t<0}","結果範圍 [0,1]","T=validSplits","忽略失敗切分"
"Flow","R^{Len}","R^{Len}=0 (T<250); 0.5 (250≤T<500); 1 (T≥500)","樣本長度 T 取有效策略的中位筆數","β_2=0.20","對應 block bootstrap 可行性"
"Flow","R^{Pool}","R^{Pool}=0 (K<20); 0.7 (20≤K<100); 1 (K≥100)","K=有效策略數","β_3=0.15","評估策略池廣度"
"Flow","R^{SPA}","R^{SPA}=(1/K)∑1_{p^{SPA}_k<α}","α=spaAlpha=0.1","β_4=0.15","伺服端回填後計算"
"Flow","R^{MCS}","R^{MCS}=|S_{MCS}|/K","-","β_5=0.10","仰賴伺服端 MCS 結果"
"Flow","R^{Flow}","0.40·R^{PBO}+0.20·R^{Len}+0.15·R^{Pool}+0.15·R^{SPA}+0.10·R^{MCS}","缺值時重算有效權重","β=(0.40,0.20,0.15,0.15,0.10)","全策略共用"
"Flow","FlowScore","FlowScore=100·R^{Flow}","-","FlowScore 0-100","≥70 合格 / 50-69 邊界 / <50 不合格"
"Strategy","OOS 中位數","tilde_m_k=median_t A_k(O_t)","P10/P90 正規化至 [0,1]","-","核心穩健度指標"
"Strategy","OOS IQR","IQR_k=Q3-Q1","P10/P90 正規化至 [0,1]; 缺值→1","-","樣本不足時視為最差"
"Strategy","R^OOS_k","0.6·mid_norm_k+0.4·(1-iqr_norm_k)","mid_norm,iqr_norm∈[0,1]","α=oosAlpha=0.6","綜合中位數與離散度"
"Strategy","WR_k","WR_k=(1/W)∑1_{r_{k,w}>0}","原生於 [0,1]","-","Walk-forward 勝率"
"Strategy","bar_r_k","bar_r_k=(1/W)∑ r_{k,w} (以日報酬總和近似)","P10/P90 正規化為 ret_norm","-","反映平均 OOS 報酬"
"Strategy","R^WF_k","0.6·WR_k+0.4·ret_norm_k","ret_norm∈[0,1]","比率(0.6,0.4)","結合勝率與報酬"
"Strategy","Island 門檻","τ=P75(G)","高於門檻進入島探索","-","採 8 連通"
"Strategy","A^{norm}_j","面積正規化","P25/P95 → [0,1]","-","衡量高原面積"
"Strategy","D^{norm}_j","IQR 正規化","P25/P95 → [0,1]","-","衡量島內分散度"
"Strategy","E^{pen}_j","邊緣懲罰","負值取最大後 P25/P95 → [0,1]","-","抑制尖銳邊界"
"Strategy","S_j","S_j=A^{norm}_j·(1-D^{norm}_j)·(1-E^{pen}_j)","-","-","原始島嶼分數"
"Strategy","R^{Island}_k","R^{Island}_k=S_{j(k)}/max_j S_j","結果 [0,1]","-","meta 回傳 raw 與 normalised"
"Strategy","PSR_k","Pr(Sharpe>θ)","-","θ=dsrSharpeThreshold=0","伺服端可覆蓋"
"Strategy","DSR_k","σ(η·z), z=Sharpe·√(n-1)","夾住 [0,1]","η=dsrLogisticEta=0.5","亦支援伺服端機率"
"Strategy","R^{DSR/PSR}_k","max(PSR_k,DSR_k)","-","γ_1=0.25","取較保守顯著性"
"Strategy","R^{Strategy}_k","0.25·R^{DSR/PSR}_k+0.25·R^{OOS}_k+0.25·R^{WF}_k+0.25·R^{Island}_k","缺值視為0,保持原權重","γ=(0.25,0.25,0.25,0.25)","逐策略整體分數"
"綜合","OFI_k","OFI_k=100·(0.30·R^{Flow}+0.70·R^{Strategy}_k)","缺值視為0,保持原權重","w_F=0.30; w_S=0.70","輸出 0-100 分"
"綜合","Verdict","👍≥80; ✅65-79; 😐50-64; ⚠️<50","-","-","資料不足→顯示「資料不足」"
